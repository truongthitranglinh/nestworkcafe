<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NestWork - H·ªì s∆° c·ªßa t√¥i</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="stylesheet" href="chatbot.css">

  <link rel="stylesheet" href="stylepro5KH.css" />
</head>

<body>

  <main class="profile-page">
    <div class="container">

      <!-- CARD TH√îNG TIN -->
      <section class="card user-card">
        <div class="user-left">
          <div class="user-avatar">
            <i class="fa-regular fa-user"></i>
          </div>
          <div class="user-info">
            <h1>Linh</h1>
            <p class="sub">Th√†nh vi√™n VIP ‚Ä¢ NestWork</p>

            <div class="user-meta">
              <div class="meta-item"><i class="fa-regular fa-envelope"></i> <span>kagurayato03110106@egmail.com</span></div>
              <div class="meta-item"><i class="fa-solid fa-location-dot"></i> <span>H√† N·ªôi, Vi·ªát Nam</span></div>
            </div>

            <div class="user-tag">Kh√°ch h√†ng th√¢n thi·∫øt</div>
          </div>
        </div>

        <div class="user-right">
          <div class="meta-item"><i class="fa-solid fa-phone"></i> <span>0987 654 321</span></div>
          <div class="meta-item"><i class="fa-regular fa-calendar"></i> <span>Tham gia: 05/2026</span></div>
        </div>
      </section>

      <!-- 3 √î TH·ªêNG K√ä -->
    <section class="user-stats">
        <div class="stat-card stat-yellow">
            <div class="stat-icon">
            <i class="fa-solid fa-bag-shopping"></i>
            </div>
            <div class="stat-text">
            <div class="stat-title">ƒê∆°n h√†ng</div>
            <div class="stat-value">24</div>
            </div>
        </div>

        <div class="stat-card stat-dark">
            <div class="stat-icon">
            <i class="fa-regular fa-clock"></i>
            </div>
            <div class="stat-text">
            <div class="stat-title">Gi·ªù s·ª≠ d·ª•ng</div>
            <div class="stat-value">156h</div>
            </div>
        </div>

        <div class="stat-card stat-gray">
            <div class="stat-icon">
            <i class="fa-solid fa-gift"></i>
            </div>
            <div class="stat-text">
            <div class="stat-title">ƒêi·ªÉm th∆∞·ªüng</div>
            <div class="stat-value">1,250</div>
            </div>
        </div>
    </section>


      <!-- HO·∫†T ƒê·ªòNG G·∫¶N ƒê√ÇY -->
<section class="card">
  <div class="card-header">
    <h2>Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h2>
  </div>

  <div class="activity-list">
    <!-- JS s·∫Ω render ƒë∆°n v√†o ƒë√¢y -->
    <div id="ordersList"></div>
  </div>
</section>


      <!-- QUY·ªÄN L·ª¢I TH√ÄNH VI√äN -->
      <section class="benefits card benefits-card">
        <div class="card-header">
          <h2>Quy·ªÅn l·ª£i th√†nh vi√™n</h2>
        </div>

        <div class="benefits-grid">
          <div class="benefit-item"><span>‚ú®</span> Gi·∫£m gi√° 10% cho t·∫•t c·∫£ d·ªãch v·ª•</div>
          <div class="benefit-item"><span>üéÅ</span> T√≠ch ƒëi·ªÉm ƒë·ªïi qu√† h·∫•p d·∫´n</div>
          <div class="benefit-item"><span>‚òï</span> Mi·ªÖn ph√≠ 1 ly c√† ph√™ m·ªói th√°ng</div>
          <div class="benefit-item"><span>‚è±Ô∏è</span> ∆Øu ti√™n ƒë·∫∑t ch·ªó v√†o gi·ªù cao ƒëi·ªÉm</div>
          <div class="benefit-item"><span>üéâ</span> Tham gia s·ª± ki·ªán d√†nh ri√™ng cho VIP</div>
          <div class="benefit-item"><span>üí≥</span> Thanh to√°n linh ho·∫°t, tr·∫£ sau</div>
        </div>
      </section>

    </div>
  </main>

<script>
  document.querySelectorAll(".act .act__head").forEach(btn => {
    btn.addEventListener("click", () => {
      const item = btn.closest(".act");

      // ch·ªâ m·ªü 1 c√°i t·∫°i 1 th·ªùi ƒëi·ªÉm
      document.querySelectorAll(".act.open").forEach(x => {
        if (x !== item) x.classList.remove("open");
      });

      item.classList.toggle("open");
    });
  });
</script>

<script>
  function getOrders(){
    return JSON.parse(localStorage.getItem("orders") || "[]");
  }

  function badgeHTML(status){
    if(status === "Ch·ªù duy·ªát") return `<span class="badge badge--pending">Ch·ªù duy·ªát</span>`;
    if(status === "Ho√†n th√†nh") return `<span class="badge badge--done">Ho√†n th√†nh</span>`;
    if(status === "ƒê√£ h·ªßy") return `<span class="badge badge--cancel">ƒê√£ h·ªßy</span>`;
    return `<span class="badge">${status}</span>`;
  }

  function renderOrders(){
    const box = document.getElementById("ordersList");
    if(!box) return;

      window.addEventListener("storage", (e) => {
      if(e.key === "orders") renderOrders();
    });

    const orders = getOrders();

    if(orders.length === 0){
      box.innerHTML = "";
      return;
    }

    

    // ‚úÖ g·∫Øn l·∫°i click m·ªü/ƒë√≥ng cho c√°c ƒë∆°n m·ªõi render ra
    document.querySelectorAll("#ordersList .act .act__head").forEach(btn => {
      btn.addEventListener("click", () => {
        const item = btn.closest(".act");
        document.querySelectorAll(".act.open").forEach(x => {
          if (x !== item) x.classList.remove("open");
        });
        item.classList.toggle("open");
      });
    });
  }

  
</script>


</script>
<script>
  function getOrders(){
    try { return JSON.parse(localStorage.getItem("orders") || "[]"); }
    catch(e){ return []; }
  }
  function saveOrders(arr){ localStorage.setItem("orders", JSON.stringify(arr)); }

  function cancelOrder(code){
    const orders = getOrders();
    const idx = orders.findIndex(o => o.code === code);
    if(idx === -1){
      alert("Kh√¥ng t√¨m th·∫•y ƒë∆°n ƒë·ªÉ h·ªßy (thi·∫øu m√£ ƒë∆°n).");
      return;
    }
    if(orders[idx].status !== "Ch·ªù duy·ªát"){
      alert("Ch·ªâ h·ªßy ƒë∆∞·ª£c ƒë∆°n ƒëang Ch·ªù duy·ªát.");
      return;
    }

    if(confirm("B·∫°n mu·ªën h·ªßy ƒë∆°n n√†y?")){
      orders[idx].status = "ƒê√£ h·ªßy";
      saveOrders(orders);
      renderOrders();
    }
  }

  function renderOrders(){
    const box = document.getElementById("ordersList");
    if(!box) return;

    const orders = getOrders();
    if(orders.length === 0){
      box.innerHTML = `<p style="color:#777;margin-top:10px;">Ch∆∞a c√≥ ƒë∆°n n√†o.</p>`;
      return;
    }

    box.innerHTML = orders.map(o => {
      const status = o.status || "Ch·ªù duy·ªát";
      const code = o.code || "(Ch∆∞a c√≥ m√£)";

      return `
        <div class="order-row">
          <div class="order-left">
            <div class="order-title">${o.type || "ƒê·∫∑t ch·ªó"} ‚Ä¢ <b>${code}</b></div>

            <div class="order-sub">
              ${o.date || "-"} ‚Ä¢ ${o.time || "-"} ‚Ä¢ ${o.duration || "-"} ‚Ä¢ ${o.people || "-"} ng∆∞·ªùi
            </div>

            <div class="order-sub">
              ${o.name || "-"} ‚Ä¢ ${o.phone || "-"} ‚Ä¢ ${o.email || "-"}
            </div>

            ${status === "Ch·ªù duy·ªát" && o.code ? `<button class="btn-cancel-order" data-code="${o.code}">H·ªßy ƒë∆°n</button>` : ``}
          </div>

          <div class="order-right">
            <span class="order-badge ${status === "Ch·ªù duy·ªát" ? "pending" : (status === "ƒê√£ h·ªßy" ? "cancel" : "done")}">
              ${status}
            </span>
          </div>
        </div>
      `;
    }).join("");

    box.querySelectorAll(".btn-cancel-order").forEach(btn => {
      btn.addEventListener("click", () => cancelOrder(btn.dataset.code));
    });
  }

  document.addEventListener("DOMContentLoaded", renderOrders);
</script>


<script>
  function getOrders(){
    try { return JSON.parse(localStorage.getItem("orders") || "[]"); }
    catch(e){ return []; }
  }
  function saveOrders(arr){
    localStorage.setItem("orders", JSON.stringify(arr));
  }
  function makeCode(){
    const n = Math.floor(Math.random()*900000) + 100000;
    return "NW-" + n;
  }

  document.getElementById("bookingForm").addEventListener("submit", function(e){
  e.preventDefault();

  const currentCustomer = JSON.parse(localStorage.getItem("currentCustomer") || "{}");
  const order = {
    id: Date.now(),
    customerName: document.getElementById("bkName").value.trim(),
    phone: document.getElementById("bkPhone").value.trim(),
    date: document.getElementById("bkDate").value,
    time: document.getElementById("bkTime").value,
    people: document.getElementById("bkPeople").value,
    area: document.getElementById("bkArea").value,
    table: document.getElementById("bkTable").value,
    note: document.getElementById("bkNote").value,
    status: "Ch·ªù duy·ªát",
    cancelReason: "",

    email: (currentCustomer.email || "").toLowerCase(),
    createdAt: Date.now()
  };

 

  const orders = JSON.parse(localStorage.getItem("orders") || "[]");
  orders.unshift(order);
  localStorage.setItem("orders", JSON.stringify(orders));

  alert("ƒê·∫∑t b√†n th√†nh c√¥ng ‚Äì vui l√≤ng ch·ªù duy·ªát");
  this.reset();
});


</script>

<script>
(function(){
  // ‚úÖ b·∫°n ƒëang d√πng isLogin="true"
  const logged = localStorage.getItem("isLogin") === "true";
  const role = localStorage.getItem("role");

  if(!logged){
    // ch∆∞a ƒëƒÉng nh·∫≠p ‚Üí v·ªÅ login cho ƒë√∫ng
    localStorage.setItem("redirectAfterLogin", "pro5KH.html");
    window.location.href = "login.html";
    return;
  }
})();
</script>

<script src="chatbot.js" defer></script>

</body>
</html>



